// Generated by CoffeeScript 1.6.3
var iniciarCalendario, llenarCalles, llenarColonias, llenarColores, llenarComandancias, llenarCompetentes, llenarCorporaciones, llenarDelegaciones, llenarDescVehiculos, llenarHoras, llenarLugares, llenarMarcas, llenarMinutos, llenarModelos, llenarMps, llenarPensiones, llenarPensionesPar, llenarProfiles, llenarTipo, llenarTurnos, reiniciarInventario;

window.cargarSelects = function(fn) {
  $('#myTab a').click(function(e) {
    e.preventDefault();
    $(this).tab('show');
  });
  if (!window.inventario) {
    llenarDelegaciones();
    llenarComandancias();
    llenarTurnos();
    llenarCorporaciones();
    llenarCalles();
    llenarColonias();
    llenarPensiones();
    llenarCompetentes();
    llenarMps();
    llenarDescVehiculos();
    llenarMarcas();
    llenarModelos();
    llenarColores();
    llenarTipo();
    llenarLugares();
    llenarHoras();
    llenarMinutos();
    llenarPensionesPar();
    llenarProfiles();
    return reiniciarInventario();
  } else {
    return $.when($.ajax("/catalogos/delegaciones.json"), $.ajax("/catalogos/comandancias.json"), $.ajax("/catalogos/turnos.json"), $.ajax("/catalogos/corporaciones.json"), $.ajax("/catalogos/calles.json"), $.ajax("/catalogos/colonias.json"), $.ajax("/catalogos/pensiones.json"), $.ajax("/catalogos/aut_comp_inv.json"), $.ajax("/catalogos/mps.json"), $.ajax("/catalogos/descVehiculos.json"), $.ajax("/catalogos/marcas.json"), $.ajax("/catalogos/colores.json"), $.ajax("/catalogos/tipoVehiculo.json"), $.ajax("/catalogos/lugares.json"), $.ajax("/catalogos/listProfile.json")).done(function(delegaciones, comandancias, turnos, corporaciones, calles, colonias, pensiones, competentes, mps, descVehiculos, marcas, colores, tipos, lugares, profiles) {
      window.delegaciones = delegaciones[0];
      window.comandancias = comandancias[0];
      window.turnos = turnos[0];
      window.corporaciones = corporaciones[0];
      window.calles = calles[0];
      window.colonias = colonias[0];
      window.pensiones = pensiones[0];
      window.autCompInvs = competentes[0];
      window.mps = mps[0];
      window.descVehiculos = descVehiculos[0];
      window.marcas = marcas[0];
      window.colores = colores[0];
      window.tipos = tipos[0];
      window.lugares = lugares[0];
      window.profiles = profiles[0];
      llenarDelegaciones();
      llenarComandancias();
      llenarTurnos();
      llenarCorporaciones();
      llenarCalles();
      llenarColonias();
      llenarPensiones();
      llenarCompetentes();
      llenarMps();
      llenarDescVehiculos();
      llenarMarcas();
      llenarModelos();
      llenarColores();
      llenarTipo();
      llenarLugares();
      llenarHoras();
      llenarMinutos();
      llenarPensionesPar();
      llenarProfiles();
      iniciarCalendario();
      return fn.loadInventarioOnView();
    });
  }
};

iniciarCalendario = function() {
  $('#fecha-incidente').datetimepicker({
    pickTime: false,
    language: 'es'
  });
  $('#fecha-entrada-inventario-append').datetimepicker({
    pickTime: false,
    language: 'es'
  });
  return $('#hora-entrada-inventario-append').datetimepicker({
    pickDate: false,
    language: 'es'
  });
};

llenarDelegaciones = function() {
  var delegacion, opciones, sel, _i, _len, _ref;
  if (!window.delegaciones) {
    window.cargarDelegaciones(llenarDelegaciones);
  } else {
    sel = $('#delegacion_inv').html("");
    opciones = '<option value= "NO">**SELECCIONAR**</option>';
    _ref = window.delegaciones;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      delegacion = _ref[_i];
      opciones += '<option value="' + delegacion.delegacion + '">' + delegacion.delegacion + '</option>';
    }
    sel.append(opciones);
  }
};

llenarComandancias = function() {
  var comandancia, opciones, sel, _i, _len, _ref;
  if (!window.comandancias) {
    cargarComandancias(llenarComandancias);
  } else {
    sel = $('#comandancia_inv').html("");
    opciones = '<option value="NO">**SELECCIONAR**</option>';
    _ref = window.comandancias;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      comandancia = _ref[_i];
      opciones += '<option value="' + comandancia.comandancia + '">' + comandancia.comandancia + '</option>';
    }
    sel.append(opciones);
  }
};

llenarTurnos = function() {
  var opciones, sel, turno, _i, _len, _ref;
  if (!window.turnos) {
    return cargarTurnos(llenarTurnos);
  } else {
    sel = $('#turnos_inv').html("");
    opciones = '<option value="NO">**SELECCIONAR**</option>';
    _ref = window.turnos;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      turno = _ref[_i];
      opciones += '<option value="' + turno.turno + '">' + turno.turno + '</option>';
    }
    sel.append(opciones);
  }
};

llenarCorporaciones = function() {
  var corporacion, opciones, sel, _i, _len, _ref;
  if (!window.corporaciones) {
    return cargarCorporaciones(llenarCorporaciones);
  } else {
    sel = $('#corporacion_inv').html("");
    opciones = '<option value="NO">**SELECCIONAR**</option>';
    _ref = window.corporaciones;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      corporacion = _ref[_i];
      opciones += '<option value="' + corporacion.corporacion + '">' + corporacion.corporacion + '</option>';
    }
    sel.append(opciones);
  }
};

llenarCalles = function() {
  var item, nombres, _i, _len, _ref;
  if (!window.calles) {
    cargarCalles(llenarCalles);
  } else {
    nombres = [];
    _ref = window.calles;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      nombres.push(item.calle);
    }
    $("#calle1_inv").autocomplete({
      source: nombres
    });
    $("#calle2_inv").autocomplete({
      source: nombres
    });
  }
};

llenarColonias = function() {
  var item, nombres, _i, _len, _ref;
  if (!window.colonias) {
    cargarColonias(llenarColonias);
  } else {
    nombres = [];
    _ref = window.colonias;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      nombres.push(item.nombre);
    }
    $("#colonia_inv").autocomplete({
      source: nombres
    });
  }
};

llenarPensiones = function() {
  var opciones, pension, sel, _i, _len, _ref;
  if (!window.pensiones) {
    return cargarPensiones(llenarPensiones);
  } else {
    sel = $('#depositadoEn_inv').html("");
    opciones = '<option value="NO">**SELECCIONAR**</option>';
    _ref = window.pensiones;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      pension = _ref[_i];
      opciones += '<option value="' + pension.nombre_pension + '">' + pension.nombre_pension + '</option>';
    }
    sel.append(opciones);
  }
};

llenarCompetentes = function() {
  var competente, opciones, sel, _i, _len, _ref;
  if (!window.autCompInvs) {
    return cargarCompetentes(llenarCompetentes);
  } else {
    sel = $('#autoridadCompetente_inv').html("");
    opciones = '<option value="NO">**SELECCIONAR**</option>';
    _ref = window.autCompInvs;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      competente = _ref[_i];
      opciones += '<option value="' + competente.autoridad + '">' + competente.autoridad + '</option>';
    }
    sel.append(opciones);
  }
};

llenarMps = function() {
  var mp, opciones, sel, _i, _len, _ref;
  if (!window.mps) {
    return cargarMps(this.llenarMps);
  } else {
    sel = $('#mp_inv').html("");
    opciones = '<option value="NO">**SELECCIONAR**</option>';
    _ref = window.mps;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      mp = _ref[_i];
      opciones += '<option value="' + mp.agencia + '">' + mp.agencia + '</option>';
    }
    sel.append(opciones);
  }
};

llenarMarcas = function() {
  var a_marcas, marca, nombre, opciones, sel, _i, _j, _len, _len1, _ref, _ref1;
  if (!window.marcas) {
    cargarMarcas(llenarMarcas);
  } else {
    sel = $("#marca_inv").html("");
    opciones = '<option  value="NO">**SELECCIONAR**</option>';
    a_marcas = [];
    _ref = window.marcas;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      marca = _ref[_i];
      a_marcas[marca.marca] = 1;
    }
    _ref1 = _.keys(a_marcas);
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      nombre = _ref1[_j];
      opciones += '<option value="' + nombre + '">' + nombre + '</option>';
    }
    sel.append(opciones);
  }
};

llenarModelos = function() {
  var opciones, sel, x, _i;
  sel = $('#modelo_inv').html("");
  opciones = '<option  value="NO">**SELECCIONAR**</option>';
  for (x = _i = 1910; _i <= 2020; x = ++_i) {
    opciones += '<option value="' + x + '">' + x + '</option>';
  }
  opciones += '<option value="' + -1 + '">' + "SE DESCONOCE" + '</option>';
  sel.append(opciones);
};

llenarColores = function() {
  var color, opciones, sel, _i, _len, _ref;
  if (!window.colores) {
    return cargarColores(llenarColores);
  } else {
    sel = $('#color_inv').html("");
    opciones = '<option  value="NO">**SELECCIONAR**</option>';
    _ref = window.colores;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      color = _ref[_i];
      opciones += '<option value="' + color.color + '">' + color.color + '</option>';
    }
    sel.append(opciones);
  }
};

llenarProfiles = function() {
  var agente, agentes, list_cobro, that, _i, _len;
  that = this;
  if (!window.profiles) {
    return cargarProfiles(llenarProfiles);
  } else {
    list_cobro = [];
    agentes = window.profiles;
    for (_i = 0, _len = agentes.length; _i < _len; _i++) {
      agente = agentes[_i];
      list_cobro.push(agente.cobro);
    }
    return $("#folio_agente").autocomplete({
      source: list_cobro,
      change: function(evento, ui) {
        var p, _j, _len1, _ref, _results;
        _ref = window.profiles;
        _results = [];
        for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
          p = _ref[_j];
          if (p) {
            if (p.cobro === ui.item.value) {
              _results.push($("#agente_inv").val(p.nombre));
            } else {
              _results.push(void 0);
            }
          } else {
            _results.push(void 0);
          }
        }
        return _results;
      }
    });
  }
};

llenarDescVehiculos = function() {
  var item, opciones, sel, _i, _len, _ref;
  if (!window.descVehiculos) {
    cargarDescVehiculos(llenarDescVehiculos);
  } else {
    $("#desc-vehiculo").html('');
    sel = $("#desc-vehiculo");
    opciones = '<option  value="SEL">**SELECCIONAR**</option>';
    _ref = window.descVehiculos;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      opciones += '<option value="' + item.descripcion + '">' + item.descripcion + '</option>';
    }
    sel.append(opciones);
  }
};

llenarTipo = function() {
  var opciones, sel, tipo, _i, _len, _ref;
  if (!window.tipos) {
    return cargarTipos(llenarTipo);
  } else {
    sel = $('#tipoVehiculo_inv').html("");
    opciones = '<option  value="NO">**SELECCIONAR**</option>';
    _ref = window.tipos;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      tipo = _ref[_i];
      opciones += '<option value="' + tipo.tipo + '">' + tipo.tipo + '</option>';
    }
    sel.append(opciones);
  }
};

llenarLugares = function() {
  var lugar, opciones, sel, _i, _len, _ref;
  if (!window.lugares) {
    return cargarLugares(llenarLugares);
  } else {
    sel = $('#lugar_inv').html("");
    opciones = '<option  value="NO">**SELECCIONAR**</option>';
    _ref = window.lugares;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      lugar = _ref[_i];
      opciones += '<option value="' + lugar.descripcion + '">' + lugar.descripcion + '</option>';
    }
    sel.append(opciones);
  }
};

llenarHoras = function() {
  var opciones, sel, x, _i;
  sel = $('#hora_inv').html("");
  opciones = '';
  for (x = _i = 1; _i <= 12; x = ++_i) {
    opciones += '<option value="' + x + '">' + x + '</option>';
  }
  opciones += '<option value="' + -1 + '">' + "SE DESCONOCE" + '</option>';
  sel.append(opciones);
};

llenarMinutos = function() {
  var opciones, sel, x, _i;
  sel = $('#minutos_inv').html("");
  opciones = '';
  for (x = _i = 1; _i <= 60; x = ++_i) {
    opciones += '<option value="' + x + '">' + x + '</option>';
  }
  opciones += '<option value="' + -1 + '">' + "SE DESCONOCE" + '</option>';
  sel.append(opciones);
};

llenarPensionesPar = function() {
  var opciones, pension, sel, _i, _len, _ref;
  if (!window.pensiones) {
    return cargarPensiones(llenarPensionesPar);
  } else {
    sel = $('#pensionPart_inv').html("");
    opciones = '<option  value="NO">**SELECCIONAR**</option>';
    _ref = window.pensiones;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      pension = _ref[_i];
      opciones += '<option value="' + pension.nombre_pension + '">' + pension.nombre_pension + '</option>';
    }
    return sel.append(opciones);
  }
};

reiniciarInventario = function() {
  window.inventario = {};
  window.inventario.fotos = [];
};
