// Generated by CoffeeScript 1.6.3
define(['core/sandbox', 'accidentes/ManagerBusquedaEstMapas'], function(sandbox, mod_busqueda) {
  var IniciarMapa;
  return IniciarMapa = {
    mapa: null,
    map: null,
    delegacion: null,
    iniciar: function() {
      this.sandbox = new sandbox(this);
      mod_busqueda.iniciar();
      this.delegacion = $("#bus_delegacion");
      this.iniciarCalendario();
      this.llenarDelegaciones();
      this.delegacion.on('change', function(evento) {
        var valor;
        valor = $('#' + evento.currentTarget.id).val();
        window.actualizarComandanciaValor(valor);
      });
      $("#boton_buscar").click();
      $("#bus_fechai").val('2007-11-02');
      return $("#bus_fechaf").val('2007-12-27');
    },
    llenarDelegaciones: function() {
      var delegacion, opciones, sel, _i, _len, _ref;
      if (!window.delegaciones) {
        window.cargarDelegaciones(this.llenarDelegaciones);
      } else {
        sel = $('#bus_delegacion').html("");
        opciones = '';
        _ref = window.delegaciones;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          delegacion = _ref[_i];
          opciones += '<option value="' + delegacion.delegacion + '">' + delegacion.delegacion + '</option>';
        }
        sel.append(opciones);
      }
      window.actualizarComandancia();
    },
    iniciarCalendario: function() {
      $('#bus-mapa-fechai').datetimepicker({
        pickTime: false,
        language: 'pt-BR'
      });
      return $('#bus-mapa-fechaf').datetimepicker({
        pickTime: false,
        language: 'pt-BR'
      });
    }
  };
});
