// Generated by CoffeeScript 1.6.3
define(['core/sandbox'], function(sandbox) {
  var ManagerCompetenciaJudicial;
  return ManagerCompetenciaJudicial = {
    botonId: '#agregar_competencia_judicial',
    elementId: '#tabla_saldo_sangre_view',
    padreId: "#competencia-judicial",
    boton: null,
    element: null,
    padre: null,
    template: null,
    ocultarCSS: null,
    mostrarCSS: null,
    iniciar: function() {
      var that;
      that = this;
      this.boton = $(this.botonId);
      this.sandbox = new sandbox(this);
      this.padre = $(this.padreId);
      this.element = $(this.elementId);
      this.sandbox.on('actualizar-tabla-competencia-judicial', this.actualizarTablaCompetenciaJudicial);
      this.sandbox.on('vaciar-tabla-competencia-judicial', this.vaciarTabla);
      this.sandbox.on('cargar-competencia-judicial-view', this.cargarCompetenciaJudicialView);
      if (window.accidente) {
        this.actualizarTablaCompetenciaJudicial();
      }
    },
    cargarCompetenciaJudicialView: function() {
      return this.actualizarTablaCompetenciaJudicial();
    },
    vaciarTabla: function() {
      var tabla;
      tabla = $("#tab_competencia_judicial>tbody");
      return tabla.empty();
    },
    borrarCompetenciaJudicial: function(evento) {
      var competenciaJudiciales, her, id, identificador;
      identificador = evento.target.id;
      her = identificador.split('-');
      id = her[1];
      competenciaJudiciales = window.accidente.competenciaJudiciales;
      competenciaJudiciales.splice(id, 1);
      window.accidente.competenciaJudiciales = competenciaJudiciales;
      return this.actualizarTablaCompetenciaJudicial();
    },
    actualizarTablaCompetenciaJudicial: function() {
      var comp, competencia, i, legenda, row, tabla, tam, that, txt, _i, _j, _len, _len1, _ref, _ref1;
      that = this;
      $("#tab_competencia_judicial>tbody").empty();
      tabla = $("#tab_competencia_judicial");
      _ref = window.accidente.competenciaJudiciales;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        competencia = _ref[i];
        if (competencia) {
          row = "<tr>						<td><a href=\"#editar-judicial\" id=\"borrarCompetenciaJudicial-" + i + "\" class=\"borrarCompetenciaJudicial\"><i class='icon-remove'></i></a>							<a href=\"#editar-judicial\" id=\"actualizarCompetenciaJudicial-" + i + "\" class=\"actualizarCompetenciaJudicial\"><i class='icon-edit'></i></a></td>						<td>" + competencia.nombre + "</td>						<td>" + competencia.domicilio + "</td>						<td>" + competencia.estado_herido + "</td>						<td>" + competencia.se_encontraba + "</td>						<td>" + competencia.detenido_en + "</td>						<td>" + competencia.disposicion + "</td>						</tr>";
          console.log(row);
          tabla.append(row);
        }
      }
      _ref1 = window.accidente.competenciaJudiciales;
      for (i = _j = 0, _len1 = _ref1.length; _j < _len1; i = ++_j) {
        comp = _ref1[i];
        if (comp) {
          $("#borrarCompetenciaJudicial-" + i).on('click', function(evento) {
            return that.borrarCompetenciaJudicial(evento);
          });
          $("#actualizarCompetenciaJudicial-" + i).on('click', function(evento) {
            var her, id, identificador;
            identificador = evento.currentTarget.id;
            her = identificador.split('-');
            id = her[1];
            return that.sandbox.emit('llenar-competencia-judicial-view', id);
          });
        }
      }
      tam = window.accidente.competenciaJudiciales.length;
      legenda = $("#num_competencia");
      txt = "III Competencia Judicial" + '(<span class="indicador">' + tam + "</span>)";
      return legenda.html(txt);
    }
  };
});
