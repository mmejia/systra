// Generated by CoffeeScript 1.6.3
define(['core/sandbox'], function(sandbox) {
  var modulo;
  return modulo = {
    padreId: "#managerCaracteristicasVehiculo_spa_inf",
    elementId: "#CaracteristicasVehiculoServParticularInf-View",
    element: null,
    template: null,
    padre: null,
    articulosSel: [],
    auto: null,
    camioneta: null,
    camion: null,
    bicicleta: null,
    otros: null,
    servicio_publico: null,
    radServicioPublico: null,
    radServicioParticular: null,
    iniciar: function() {
      var that;
      that = this;
      this.padre = $(this.padreId);
      this.sandbox = new sandbox(this);
      this.llenarMarcas();
      this.llenarModelos();
      this.llenarColores();
      this.llenarEstados();
      this.llenarTipoVehiculos();
      this.establecerDefault();
      this.radServicioPublico = document.getElementById("radioServicioPublico");
      this.radServicioParticular = document.getElementById("radioServicioParticular");
      $("#radioServicioParticular").on('click', function(evento) {
        var obj;
        obj = evento.currentTarget;
        if (obj.checked === true) {
          return that.ocultarServicioParticular();
        }
      });
      $("#radioServicioPublico").on('click', function(evento) {
        var obj;
        obj = evento.currentTarget;
        if (obj.checked === true) {
          return that.showServicioParticular();
        }
      });
      this.sandbox.on('update-caracteristicas-vehiculo', this.updateCaracteristicasVehiculos);
      this.sandbox.on('limpiar-caracteristicas-vehiculo', this.limpiarCaracteristicasVehiculos);
      this.sandbox.on('llenar-infraccion-caracteristicas-vehiculo', this.llenarInfraccionCaracteristicasVehiculo);
      this.tipo_servicio = document.getElementById("#tipo_cv_spa_inf");
      this.marca_vehiculo = $("#marca_cv_spa_inf");
      this.marca_vehiculo.on('change', function(evento) {
        var valor;
        valor = $('#' + evento.currentTarget.id).val();
        window.actualizarSubMarcaValor(valor);
      });
    },
    updateCaracteristicasVehiculos: function() {
      return this.renderCaracteristicasVehiculos();
    },
    establecerDefault: function() {
      var that;
      that = this;
      $("#detalle_color_cv_spa_inf_default").on('click', function() {
        return $("#detalle_color_cv_spa_inf").val("SE DESCONOCE");
      });
      $("#placas_cv_spa_inf_default").on('click', function() {
        var placa;
        placa = $('#placas_cv_spa_inf').val();
        if (placa !== "") {
          return that.cargarVehiculo(placa);
        }
      });
      $("#estado_cv_spa_inf_default").on('click', function() {
        return $("#estado_cv_spa_inf").val("SE DESCONOCE");
      });
      return $("#serie_cv_spa_inf_default").on('click', function() {
        return $("#serie_cv_spa_inf").val("NO VISIBLE");
      });
    },
    cargarVehiculo: function(placa) {
      $.ajax({
        type: 'GET',
        url: '/infraccion/getHistVehiculo/' + placa + '/',
        success: function(data) {
          console.log(data);
          $('#marca_cv_spa_inf').val(data.veh_marca);
          $('#submarca_cv_spa_inf').val(data.submarca);
          $('#modelo_cv_spa_inf').val(data.veh_modelo);
          $('#color_cv_spa_inf').val(data.veh_color);
          $('#detalle_color_cv_spa_inf').val(data.veh_color_detalle);
          $('#tipo_cv_spa_inf').val(data.sp_tipo);
          $('#serie_cv_spa_inf').val(data.veh_serie);
          $('#tipo_vehiculo_cv_spa_inf').val(data.sp_tipo);
          $('#empresa_cv_spa_inf').val(data.veh_empresa);
          $('#no_economico_cv_spa_inf').val(data.sp_no_economico);
          return $('#no_tarjeton_cv_spa_inf').val(data.sp_no_tarjeton);
        }
      });
    },
    showServicioParticular: function() {
      var cambios, el;
      el = $("#cont-servicio-publico");
      cambios = {
        width: "100%",
        height: "auto"
      };
      return el.css(cambios);
    },
    ocultarServicioParticular: function() {
      var cambios, el;
      el = $("#cont-servicio-publico");
      cambios = {
        height: "0px",
        width: "0px"
      };
      return el.css(cambios);
    },
    limpiarCaracteristicasVehiculos: function() {
      $('#marca_cv_spa_inf').val('');
      $('#submarca_cv_spa_inf').val('');
      $('#modelo_cv_spa_inf').val('');
      $('#color_cv_spa_inf').val('');
      $('#detalle_color_cv_spa_inf').val('');
      $('#tipo_cv_spa_inf').val('');
      $('#placas_cv_spa_inf').val('');
      $('#estado_cv_spa_inf').val('');
      $('#serie_cv_spa_inf').val('');
      $('#tipo_vehiculo_cv_spa_inf').val('');
      $('#empresa_cv_spa_inf').val('');
      $('#ruta_cv_spa_inf').val('');
      $('#no_economico_cv_spa_inf').val('');
      return $('#no_tarjeton_cv_spa_inf').val('');
    },
    llenarInfraccionCaracteristicasVehiculo: function() {
      var vehiculo;
      vehiculo = window.infraccion.vehiculo;
      vehiculo.marca = $('#marca_cv_spa_inf').val();
      vehiculo.submarca = $('#submarca_cv_spa_inf').val();
      vehiculo.modelo = $('#modelo_cv_spa_inf').val();
      vehiculo.color = $('#color_cv_spa_inf').val();
      vehiculo.detalle_color = $('#detalle_color_cv_spa_inf').val();
      vehiculo.tipo_placa = $('#tipo_cv_spa_inf').val();
      vehiculo.placas = $('#placas_cv_spa_inf').val();
      vehiculo.estado_placa = $('#estado_cv_spa_inf').val();
      vehiculo.serie = $('#serie_cv_spa_inf').val();
      vehiculo.tipo = $('#tipo_vehiculo_cv_spa_inf').val();
      vehiculo.empresa = $('#empresa_cv_spa_inf').val();
      vehiculo.ruta = $('#ruta_cv_spa_inf').val();
      vehiculo.no_economico = $('#no_economico_cv_spa_inf').val();
      vehiculo.no_tarjeton = $('#no_tarjeton_cv_spa_inf').val();
    },
    renderCaracteristicasVehiculos: function() {
      var vehiculo;
      vehiculo = window.infraccion.vehiculo;
      $('#marca_cv_spa_inf').val(vehiculo.marca);
      window.actualizarSubMarcaValor(vehiculo.marca);
      $('#submarca_cv_spa_inf').val(vehiculo.submarca);
      $('#modelo_cv_spa_inf').val(vehiculo.modelo);
      $('#color_cv_spa_inf').val(vehiculo.color);
      $('#detalle_color_cv_spa_inf').val(vehiculo.detalle_color);
      $('#tipo_cv_spa_inf').val(vehiculo.tipo_placa);
      $('#placas_cv_spa_inf').val(vehiculo.placas);
      $('#estado_cv_spa_inf').val(vehiculo.estado_placa);
      $('#serie_cv_spa_inf').val(vehiculo.serie);
      $('#tipo_vehiculo_cv_spa_inf').val(vehiculo.tipo);
      $('#empresa_cv_spa_inf').val(vehiculo.empresa);
      $('#ruta_cv_spa_inf').val(vehiculo.ruta);
      $('#no_economico_cv_spa_inf').val(vehiculo.no_economico);
      $('#no_tarjeton_cv_spa_inf').val(vehiculo.no_tarjeton);
    },
    llenarMarcas: function() {
      var a_marcas, marca, nombre, opciones, sel, temp, _i, _j, _len, _len1, _ref;
      if (!window.marcas) {
        cargarMarcas(this.llenarMarcas);
      } else {
        sel = $("#marca_cv_spa_inf").html("");
        opciones = '<option  value="NO">**SELECCIONAR**</option>';
        a_marcas = [];
        _ref = window.marcas;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          marca = _ref[_i];
          a_marcas[marca.marca] = 1;
        }
        temp = _.keys(a_marcas);
        temp.sort();
        for (_j = 0, _len1 = temp.length; _j < _len1; _j++) {
          nombre = temp[_j];
          opciones += '<option value="' + nombre + '">' + nombre + '</option>';
        }
        sel.append(opciones);
      }
    },
    llenarSubMarcas: function() {
      var marca, opciones, sel, _i, _len, _ref;
      if (!window.marcas) {
        cargarMarcas(this.llenarSubMarcas);
      } else {
        sel = $("#submarca_cv_spa_inf").html("");
        opciones = '<option  value="NO">**SELECCIONAR**</option>';
        _ref = window.marcas;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          marca = _ref[_i];
          opciones += '<option value="' + marca.submarca + '">' + marca.submarca + '</option>';
        }
        sel.append(opciones);
      }
    },
    llenarModelos: function() {
      var opciones, sel, x, _i;
      sel = $("#modelo_cv_spa_inf").html("");
      opciones = '<option  value="NO">**SELECCIONAR**</option>';
      for (x = _i = 2018; _i >= 1910; x = --_i) {
        opciones += '<option value="' + x + '">' + x + '</option>';
      }
      opciones += '<option value="SE DESCONOCE">SE DESCONOCE</option>';
      sel.append(opciones);
    },
    llenarColores: function() {
      var color, opciones, sel, _i, _len, _ref;
      if (!window.colores) {
        cargarColores(this.llenarColores);
      } else {
        sel = $("#color_cv_spa_inf").html("");
        opciones = '<option  value="NO">**SELECCIONAR**</option>';
        _ref = window.colores;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          color = _ref[_i];
          opciones += '<option value="' + color.color + '">' + color.color + '</option>';
        }
        sel.append(opciones);
      }
    },
    llenarEstados: function() {
      var item, nombres, _i, _len, _ref;
      if (!window.estados) {
        cargarEstados(this.llenarEstados);
      } else {
        nombres = [];
        _ref = window.estados;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          item = _ref[_i];
          nombres.push(item.estado);
        }
        $("#estado_cv_spa_spa_inf").autocomplete({
          source: nombres
        });
      }
    },
    llenarTipoVehiculos: function() {
      var opciones, sel, tipo, _i, _len, _ref;
      if (!window.tipoVehiculos) {
        cargarTipoVehiculos(this.llenarTipoVehiculos);
      } else {
        sel = $("#tipo_vehiculo_cv_spa_inf").html("");
        opciones = '<option  value="NO">**SELECCIONAR**</option>';
        _ref = window.tipoVehiculos;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          tipo = _ref[_i];
          opciones += '<option value="' + tipo.tipo + '">' + tipo.tipo + '</option>';
        }
        sel.append(opciones);
      }
    }
  };
});
