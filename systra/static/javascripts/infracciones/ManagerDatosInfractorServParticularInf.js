// Generated by CoffeeScript 1.6.3
define(['core/sandbox'], function(sandbox) {
  var modulo;
  return modulo = {
    padreId: "#managerDatosInfractor_spa_inf",
    elementId: "#DatosInfractorServParticularInf-View",
    element: null,
    template: null,
    padre: null,
    articulosSel: [],
    iniciar: function() {
      var that;
      that = this;
      this.padre = $(this.padreId);
      this.sandbox = new sandbox(this);
      this.llenarColonias();
      this.llenarMunicipios();
      this.llenarEstados();
      this.establecerDefault();
      this.sandbox.on('update-infractor', this.updateInfractor);
      this.sandbox.on('limpiar-infractor', this.limpiarInfractor);
      this.sandbox.on('llenar-infraccion-infractor', this.llenarInfraccionInfractor);
      return $("#se-desconoce-conductor").on('click', function(evento) {
        var obj;
        obj = evento.currentTarget;
        if (obj.checked === true) {
          return that.establecerSeDesconoceConductor();
        } else {
          return that.disEstablecerSeDesconoceConductor();
        }
      });
    },
    llenarInfraccionInfractor: function() {
      var infractor;
      infractor = window.infraccion.infractor = {};
      infractor.nombre = $('#nombre_di_sp_inf').val();
      infractor.appPat = $('#appPaterno_di_sp_inf').val();
      infractor.appMat = $('#appMaterno_di_sp_inf').val();
      infractor.sexo = $('#sexo_di_sp_inf').val();
      infractor.edad = $('#edad_di_sp_inf').val();
      infractor.domicilio = $('#domicilio_di_sp_inf').val();
      infractor.numero = $('#nom_di_sp_inf').val();
      infractor.colonia = $('#colonia_di_sp_inf').val();
      infractor.ciudad = $('#ciudad_di_sp_inf').val();
      infractor.estado = $('#estado_di_sp_inf').val();
      infractor.no_licencia = $('#no_licencia_di_sp_inf').val();
    },
    establecerDefault: function() {
      var that;
      that = this;
      $("#nombre_di_sp_inf_default").on('click', function() {
        return $("#nombre_di_sp_inf").val("SE DESCONOCE");
      });
      $("#appPaterno_di_sp_inf_default").on('click', function() {
        return $("#appPaterno_di_sp_inf").val("SE DESCONOCE");
      });
      $("#appMaterno_di_sp_inf_default").on('click', function() {
        return $("#appMaterno_di_sp_inf").val("SE DESCONOCE");
      });
      $("#edad_di_sp_inf_default").on('click', function() {
        return $("#edad_di_sp_inf").val("SE DESCONOCE");
      });
      $("#domicilio_di_sp_inf_default").on('click', function() {
        return $("#domicilio_di_sp_inf").val("SE DESCONOCE");
      });
      $("#nom_di_sp_inf_default").on('click', function() {
        return $("#nom_di_sp_inf").val("SE DESCONOCE");
      });
      $("#colonia_di_sp_inf_default").on('click', function() {
        return $("#colonia_di_sp_inf").val("SE DESCONOCE");
      });
      $("#ciudad_di_sp_inf_default").on('click', function() {
        return $("#ciudad_di_sp_inf").val("SE DESCONOCE");
      });
      $("#estado_di_sp_inf_default").on('click', function() {
        return $("#estado_di_sp_inf").val("SE DESCONOCE");
      });
      return $("#no_licencia_di_sp_inf_default").on('click', function() {
        var lic;
        lic = $('#no_licencia_di_sp_inf').val();
        if (lic !== "") {
          return that.cargarInfractor(lic);
        }
      });
    },
    updateInfractor: function() {
      this.renderInfractor();
    },
    cargarInfractor: function(licencia) {
      $.ajax({
        type: 'GET',
        url: '/infraccion/getHistInfractor/' + licencia + '/',
        success: function(data) {
          $('#nombre_di_sp_inf').val(data.infractor_nombre);
          $('#appPaterno_di_sp_inf').val(data.infractor_apepaterno);
          $('#appMaterno_di_sp_inf').val(data.infractor_apematerno);
          $('#sexo_di_sp_inf.input').val(data.infractor_sexo);
          $('#edad_di_sp_inf').val(data.infractor_edad);
          $('#domicilio_di_sp_inf').val(data.infractor_domicilio);
          $('#colonia_di_sp_inf').val(data.colonia);
          $('#ciudad_di_sp_inf').val(data.ciudad);
          return $('#estado_di_sp_inf').val(data.estado);
        }
      });
    },
    disEstablecerSeDesconoceConductor: function() {
      $('#nombre_di_sp_inf').val("");
      $('#appPaterno_di_sp_inf').val("");
      $('#appMaterno_di_sp_inf').val("");
      $('#sexo_di_sp_inf').val("");
      $('#edad_di_sp_inf').val("");
      $('#domicilio_di_sp_inf').val("");
      $('#nom_di_sp_inf').val("");
      $('#colonia_di_sp_in').val("");
      $('#ciudad_di_sp_inf').val("");
      $('#estado_di_sp_inf').val("");
      $('#no_licencia_di_sp_in').val("");
      $('#nombre_di_sp_inf').prop("disabled", false);
      $('#appPaterno_di_sp_inf').prop("disabled", false);
      $('#appMaterno_di_sp_inf').prop("disabled", false);
      $('#sexo_di_sp_inf').prop("disabled", false);
      $('#edad_di_sp_inf').prop("disabled", false);
      $('#domicilio_di_sp_inf').prop("disabled", false);
      $('#nom_di_sp_inf').prop("disabled", false);
      $('#colonia_di_sp_inf').prop("disabled", false);
      $('#ciudad_di_sp_inf').prop("disabled", false);
      $('#estado_di_sp_inf').prop("disabled", false);
      return $('#no_licencia_di_sp_in').prop("disabled", false);
    },
    establecerSeDesconoceConductor: function() {
      $('#nombre_di_sp_inf').val("SE DESCONOCE");
      $('#appPaterno_di_sp_inf').val("SE DESCONOCE");
      $('#appMaterno_di_sp_inf').val("SE DESCONOCE");
      $('#sexo_di_sp_inf').val("SE DESCONOCE");
      $('#edad_di_sp_inf').val("SE DESCONOCE");
      $('#domicilio_di_sp_inf').val("SE DESCONOCE");
      $('#nom_di_sp_inf').val("SE DESCONOCE");
      $('#colonia_di_sp_inf').val("SE DESCONOCE");
      $('#ciudad_di_sp_inf').val("SE DESCONOCE");
      $('#estado_di_sp_inf').val("SE DESCONOCE");
      $('#no_licencia_di_sp_inf').val("SE DESCONOCE");
      $('#nombre_di_sp_inf').prop("disabled", true);
      $('#appPaterno_di_sp_inf').prop("disabled", true);
      $('#appMaterno_di_sp_inf').prop("disabled", true);
      $('#sexo_di_sp_inf').prop("disabled", true);
      $('#edad_di_sp_inf').prop("disabled", true);
      $('#domicilio_di_sp_inf').prop("disabled", true);
      $('#nom_di_sp_inf').prop("disabled", true);
      $('#colonia_di_sp_in').prop("disabled", true);
      $('#ciudad_di_sp_inf').prop("disabled", true);
      $('#estado_di_sp_inf').prop("disabled", true);
      return $('#no_licencia_di_sp_in').prop("disabled", true);
    },
    limpiarInfractor: function() {
      $('#nombre_di_sp_inf').val('');
      $('#appPaterno_di_sp_inf').val('');
      $('#appMaterno_di_sp_inf').val('');
      $('#sexo_di_sp_inf.input').val('');
      $('#edad_di_sp_inf').val('');
      $('#domicilio_di_sp_inf').val('');
      $('#nom_di_sp_inf').val('');
      $('#colonia_di_sp_inf').val('');
      $('#ciudad_di_sp_inf').val('');
      $('#estado_di_sp_inf').val('');
      return $('#no_licencia_di_sp_inf').val('');
    },
    renderInfractor: function() {
      var infractor;
      infractor = window.infraccion.infractor;
      $('#nombre_di_sp_inf').val(infractor.nombre);
      $('#appPaterno_di_sp_inf').val(infractor.appPat);
      $('#appMaterno_di_sp_inf').val(infractor.appMat);
      $('#sexo_di_sp_inf').val(infractor.sexo);
      $('#edad_di_sp_inf').val(infractor.edad);
      $('#domicilio_di_sp_inf').val(infractor.domicilio);
      $('#nom_di_sp_inf').val(infractor.numero);
      $('#colonia_di_sp_inf').val(infractor.colonia);
      $('#ciudad_di_sp_inf').val(infractor.ciudad);
      $('#estado_di_sp_inf').val(infractor.estado);
      $('#no_licencia_di_sp_inf').val(infractor.no_licencia);
    },
    llenarColonias: function() {
      var item, nombres, _i, _len, _ref;
      if (!window.colonias) {
        cargarColonias(this.llenarColonias);
      } else {
        nombres = [];
        _ref = window.colonias;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          item = _ref[_i];
          nombres.push(item.nombre);
        }
        $("#colonia_di_sp_inf").autocomplete({
          source: nombres
        });
      }
    },
    llenarMunicipios: function() {
      var item, nombres, _i, _len, _ref;
      if (!window.municipios) {
        cargarMunicipios(this.llenarMunicipios);
      } else {
        nombres = [];
        _ref = window.municipios;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          item = _ref[_i];
          nombres.push(item.municipio);
        }
        $("#ciudad_di_sp_inf").autocomplete({
          source: nombres
        });
      }
    },
    llenarEstados: function() {
      var item, nombres, _i, _len, _ref;
      if (!window.estados) {
        cargarEstados(this.llenarEstados);
      } else {
        nombres = [];
        _ref = window.estados;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          item = _ref[_i];
          nombres.push(item.estado);
        }
        $("#estado_di_sp_inf").autocomplete({
          source: nombres
        });
      }
    }
  };
});
