// Generated by CoffeeScript 1.6.3
define(['infracciones/ManagerDatosLicenciaServParticularInf', 'core/sandbox'], function(datos_licencia, sandbox) {
  var modulo;
  return modulo = {
    padreId: "#managerRecojeDocumento_spa_inf",
    elementId: "#managerRecojeDocumento_spa_inf_view",
    element: null,
    padre: null,
    articulosSel: [],
    optionVehiculoId: '#optionVehiculo_spa_inf',
    optionTarjetaId: '#optionTarjeta_spa_inf',
    optionPlacaId: '#optionPlaca_spa_inf',
    optionLicenciaId: '#optionLicencia_spa_inf',
    optionCortesiaId: '#optionCortesia_spa_inf',
    optionPagoMovilId: '#optionPagoMovil_spa_inf',
    iniciar: function() {
      var that;
      that = this;
      this.padre = $(this.padreId);
      this.sandbox = new sandbox(this);
      this.llenarPensiones();
      datos_licencia.iniciar();
      this.iniciarCalendario();
      $('input[name="recoje"]').on("click", function(evento) {
        console.log(evento);
        if ("" + this.value === "VEHICULO") {
          that.showRecojeVehiculo();
          return that.ocultarRecojeLicencia();
        } else if (this.value === "TARJETA DE CIRCULACION") {
          that.ocultarRecojeVehiculo();
          return that.ocultarRecojeLicencia();
        } else if (this.value === "PLACAS") {
          that.ocultarRecojeVehiculo();
          return that.ocultarRecojeLicencia();
        } else if (this.value === "LICENCIA") {
          that.ocultarRecojeVehiculo();
          return that.showRecojeLicencia();
        } else if (this.value === "CORTESIA") {
          that.ocultarRecojeVehiculo();
          return that.ocultarRecojeLicencia();
        } else if (this.value === "PAGO MOVIL") {
          that.ocultarRecojeVehiculo();
          return that.ocultarRecojeLicencia();
        }
      });
      this.sandbox.on('update-recoje', this.updateSeRecoje);
      this.sandbox.on('limpiar-recoje', this.limpiarSeRecoje);
      this.sandbox.on('llenar-infraccion-recoje', this.llenarInfraccionRecoje);
    },
    ocultarRecojeVehiculo: function() {
      var cambios, el;
      el = $("#recoje_vehiculo_spa_inf");
      cambios = {
        height: "0px",
        width: "0px"
      };
      return el.css(cambios);
    },
    ocultarRecojeLicencia: function() {
      var cambios, el;
      el = $("#cont-se-recoje-licencia");
      cambios = {
        height: "0px",
        width: "0px"
      };
      return el.css(cambios);
    },
    showRecojeVehiculo: function() {
      var cambios, el;
      el = $("#recoje_vehiculo_spa_inf");
      console.log(el);
      cambios = {
        width: "100%",
        height: "auto"
      };
      return el.css(cambios);
    },
    showRecojeLicencia: function() {
      var cambios, el;
      el = $("#cont-se-recoje-licencia");
      cambios = {
        width: "100%",
        height: "auto"
      };
      return el.css(cambios);
    },
    llenarInfraccionRecoje: function() {
      var datos, rd_cortesia, rd_licencia, rd_movil, rd_placa, rd_tarjeta, rd_vehiculo, se_recoje;
      se_recoje = window.infraccion.se_recoje = {};
      rd_vehiculo = document.getElementById("rd_vehiculo_spa_inf");
      rd_tarjeta = document.getElementById("rd_tarjeta_spa_inf");
      rd_placa = document.getElementById("rd_placa_spa_inf");
      rd_licencia = document.getElementById("rd_licencia_spa_inf");
      rd_cortesia = document.getElementById("rd_cortesia_spa_inf");
      rd_movil = document.getElementById("rd_pago_movil_spa_inf");
      if (rd_vehiculo.checked) {
        se_recoje.tipo = "VEHICULO";
        datos = se_recoje.datos = {};
        datos.recoje_vehiculo_pension = $("#recoje_vehiculo_pension_spa_inf").val();
        return datos.recoje_vehiculo_no_inventario = $('#recoje_vehiculo_no_inventario_spa_inf').val();
      } else if (rd_tarjeta.checked) {
        return se_recoje.tipo = "TARJETA DE CIRCULACION";
      } else if (rd_placa.checked) {
        return se_recoje.tipo = "PLACAS";
      } else if (rd_licencia.checked) {
        datos = se_recoje.datos = {};
        se_recoje.tipo = "LICENCIA";
        datos.recoje_licencia_estado = $('#estado_dl_sp_inf').val();
        datos.recoje_licencia_no_conducir = $('#no_licencia_dl_sp_inf').val();
        datos.recoje_licencia_fecha_vencimiento = $('#fecha_vencimiento_dl_sp_inf').val();
        datos.recoje_licencia_tipo = $('#tipo_licencia_dl_sp_inf').val();
        return datos.recoje_licencia_licencia_restricciones = $('#restriciones_licencia_dl_sp_inf').val();
      } else if (rd_cortesia.checked) {
        return se_recoje.tipo = "CORTESIA";
      } else if (rd_movil.checked) {
        return se_recoje.tipo = "PAGO MOVIL";
      }
    },
    limpiarSeRecoje: function() {
      var that;
      that = this;
      document.getElementById("rd_vehiculo_spa_inf").checked = false;
      document.getElementById("rd_tarjeta_spa_inf").checked = false;
      document.getElementById("rd_placa_spa_inf").checked = false;
      document.getElementById("rd_licencia_spa_inf").checked = false;
      document.getElementById("rd_cortesia_spa_inf").checked = false;
      document.getElementById("rd_pago_movil_spa_inf").checked = false;
      $('#recoje_vehiculo_pension_spa_inf').val('');
      $("#recoje_vehiculo_no_inventario_spa_inf").val('');
      $("#recoje_tarjeta_tipo_spa_inf").val('');
      $("#recoje_tarjeta_placas_spa_inf").val('');
      $('#recoje_tarjeta_tipo_spa_inf').val('');
      $('#recoje_tarjeta_placas_spa_inf').val('');
      $('#recoje_placa_tipo_spa_inf').val('');
      $('#recoje_placa_placas_spa_inf').val('');
      $('#estado_dl_sp_inf').val('');
      $('#no_licencia_dl_sp').val('');
      $('#fecha_vencimiento_dl_sp_inf').val('');
      $('#tipo_licencia_dl_sp_inf').val('');
      $('#restriciones_licencia_dl_sp_inf').val('');
    },
    updateSeRecoje: function() {
      return this.renderSeRecoje();
    },
    renderSeRecoje: function() {
      var se_recoje, that;
      that = this;
      se_recoje = window.infraccion.se_recoje;
      switch (se_recoje.tipo) {
        case "VEHICULO":
          $('#recoje_vehiculo_pension_spa_inf').val(se_recoje.datos.recoje_vehiculo_pension);
          $("#recoje_vehiculo_no_inventario_spa_inf").val(se_recoje.datos.recoje_vehiculo_no_inventario);
          that.showRecojeVehiculo();
          that.ocultarRecojeLicencia();
          document.getElementById("rd_vehiculo_spa_inf").checked = true;
          break;
        case "TARJETA DE CIRCULACION":
          document.getElementById("rd_tarjeta_spa_inf").checked = true;
          break;
        case "PLACAS":
          document.getElementById("rd_placa_spa_inf").checked = true;
          break;
        case "LICENCIA":
          $('#estado_dl_sp_inf').val(se_recoje.datos.recoje_licencia_estado);
          $('#no_licencia_dl_sp_inf').val(se_recoje.datos.recoje_licencia_no_conducir);
          $('#fecha_vencimiento_dl_sp_inf').val(se_recoje.datos.recoje_licencia_fecha_vencimiento);
          $('#tipo_licencia_dl_sp_inf').val(se_recoje.datos.recoje_licencia_tipo);
          $('#restriciones_licencia_dl_sp_inf').val(se_recoje.datos.recoje_licencia_restricciones);
          that.ocultarRecojeVehiculo();
          that.showRecojeLicencia();
          document.getElementById("rd_licencia_spa_inf").checked = true;
          break;
        case "CORTESIA":
          document.getElementById("rd_cortesia_spa_inf").checked = true;
          break;
        case "PAGO MOVIL":
          document.getElementById("rd_pago_movil_spa_inf").checked = true;
      }
    },
    iniciarCalendario: function() {
      return $('#fecha-venc-inf').datetimepicker({
        pickTime: false,
        language: 'es'
      });
    },
    llenarPensiones: function() {
      var opciones, pension, sel, _i, _len, _ref;
      if (!window.pensiones) {
        cargarPensiones(this.llenarPensiones);
      } else {
        sel = $("#recoje_vehiculo_pension_spa_inf").html("");
        opciones = '<option  value="NO">**SELECCIONAR**</option>';
        _ref = window.pensiones;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          pension = _ref[_i];
          opciones += '<option value="' + pension.nombre_pension + '">' + pension.nombre_pension + '</option>';
        }
        sel.append(opciones);
      }
    }
  };
});
